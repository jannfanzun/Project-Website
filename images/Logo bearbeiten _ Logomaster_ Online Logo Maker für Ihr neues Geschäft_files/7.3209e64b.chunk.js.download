(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[7],{1648:function(e,t,n){var i=n(1633),a=n(1634);e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.id=t.id,this.type=t.type,this.data=t.data,this.frame=t.frame,this.transform=t.transform}return a(e,[{key:"tableFormat",get:function(){return{}}}]),e}()},1660:function(e,t,n){},1661:function(e,t,n){},1662:function(e,t,n){},1768:function(e,t,n){var i={get:n(216),concat:n(2226),min:n(2227),max:n(1172),filter:n(1165)},a=n(833).ConfigDigester,o=function(e,t,n,o,s){var r=a.extractVirtualFrame({frame:{origin:t,size:n},transform:{rotate:o}}),c=r.origin,l={x:r.origin.x+r.size.width,y:r.origin.y+r.size.height},d={x:Math.round((c.x+l.x)/2),y:Math.round((c.y+l.y)/2)},h={id:e,type:"edge",axis:"vertical",value:c.x,endPoints:[c.y,l.y]},u={id:e,type:"edge",axis:"horizontal",value:c.y,endPoints:[c.x,l.x]},p={id:e,type:"edge",axis:"vertical",value:l.x,endPoints:[c.y,l.y]},f={id:e,type:"edge",axis:"horizontal",value:l.y,endPoints:[c.x,l.x]},g=[{id:e,type:"center",axis:"vertical",value:d.x,endPoints:[c.y,l.y]},{id:e,type:"center",axis:"horizontal",value:d.y,endPoints:[c.x,l.x]}],m=[u,h,p,f],v=["ne","se","sw","nw"],b=["n","e","s","w"];if(v.indexOf(s)>=0){var k=[[p,u],[f,p],[h,f],[u,h]][(v.indexOf(s)+Math.floor(o/90))%4];return o%90!==0&&k.pop(),k}if(b.indexOf(s)>=0){var w=[[u,p],[p,f],[f,h],[h,u]][(b.indexOf(s)+Math.floor(o/90))%4];return o%90===0&&w.pop(),w}return"edge"===s?m:"center"===s?g:i.concat(m,g)};e.exports={getGuidelinesFromExisting:function(e,t){var n=e.size,a=o("canvas",{x:0,y:0},n);return t.forEach((function(e,t){var n=e.id,s=e.frame,r=s.origin,c=s.size,l=i.get(e,"transform.rotate")||0,d=o(n,r,c,l);a=i.concat(a,d)})),a},constructGuidelines:o,getMatchedGuidingLines:function(e,t,n,a){var o=[],s=[],r=void 0,c=void 0;return t.forEach((function(t){e.forEach((function(e){if(e.axis===t.axis){var l="vertical"===t.axis,d=l?r:c,h=Math.abs(d),u=e.value-t.value,p=Math.abs(u),f=function(){var n=i.concat(e.endPoints,t.endPoints),a=i.min(n),o=i.max(n);return{axis:e.axis,value:e.value,endPoints:[a,o],difference:u}};a&&p<=n?l?o.push(f()):s.push(f()):void 0===d&&p<=n?l?(r=u,o.push(f())):(c=u,s.push(f())):p<h?l?(r=u,o=[f()]):(c=u,s=[f()]):u===d&&(l?o.push(f()):s.push(f()))}}))})),i.concat(o,s)},getInfoWithMatchedGuidingLines:function(e){var t=void 0,n=i.filter(e,{axis:"vertical"});n.length&&(t=n[0].difference);var a=void 0,o=i.filter(e,{axis:"horizontal"});return o.length&&(a=o[0].difference),{magnitisedDeltaX:t,magnitisedDeltaY:a,verticalGuidingLines:n,horizontalGuidingLines:o}}}},1772:function(e,t,n){"use strict";var i=n(65),a=n(68),o=n(67),s=n(66),r=n(1),c=n.n(r),l=n(86),d=n(124),h=n(336),u=n(736),p=(n(1660),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shouldShowBack,n=e.count;return c.a.createElement("div",{className:t?"floating-button back":"floating-button",onClick:this.props.onClick},c.a.createElement("div",{className:t?"wrapper back":"wrapper"},c.a.createElement("i",{className:"fa fa-cube","aria-hidden":"true"}),c.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}),n&&c.a.createElement("span",{className:"badge"},n)))}}]),n}(r.Component)),f=n(61),g=n(829),m=(n(1661),n(932)),v=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getTitleBlock",value:function(){var e=this.props.t;return c.a.createElement("p",{className:"title"},e("side-bar.title"))}},{key:"getLogoBlocks",value:function(e){var t=this,n=this.props.editingLogoId;return e.map((function(e,i){var a=g.a.getCanvasColor(e.layoutConfig);return c.a.createElement("div",{className:e.id===n?"logo-block active":"logo-block",key:i,onClick:function(){e.id!==n&&t.props.onSelectLogo(e)}},c.a.createElement(m.a,{svg:e.svg,backgroundColor:a,showWatermark:!0}))}))}},{key:"getMobileTitleBlock",value:function(){var e=this.props.t;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-label"},e("side-bar.title")),c.a.createElement("button",{className:"header-action-btn",onClick:this.props.onShowSavedLogos},e("navbar.back")))}},{key:"getMobileLogoBlocks",value:function(e){var t=this,n=this.props,i=n.t,a=n.isLoading,o=n.hasNextPage,s=this.props.editingLogoId;return c.a.createElement("div",{className:"logo-blocks"},e.map((function(e,n){var i=g.a.getCanvasColor(e.layoutConfig);return c.a.createElement("div",{className:e.id===s?"logo-block active":"logo-block",key:n,onClick:function(){e.id!==s&&t.props.onSelectLogo(e)}},c.a.createElement(m.a,{svg:e.svg,backgroundColor:i,showWatermark:!0}))})),o&&!a&&c.a.createElement("button",{className:"load-more-btn",onClick:this.props.onLoadMore},i("common.load-more")))}},{key:"render",value:function(){var e=this.props.t,t=this.props,n=t.active,i=t.logos,a=t.isLoading,o=t.hasNextPage,s=u.a.isMobile();return c.a.createElement("div",{className:n?"side-bar active":"side-bar"},s?this.getMobileTitleBlock():this.getTitleBlock(),s?this.getMobileLogoBlocks(i):this.getLogoBlocks(i),a&&c.a.createElement(f.a,null),o&&!a&&!s&&c.a.createElement("button",{className:"load-more-btn",onClick:this.props.onLoadMore},e("common.load-more")))}}]),n}(r.Component),b=Object(d.b)()(v),k=n(4),w=n(3),y=(n(1662),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,a){var o;return Object(i.a)(this,n),(o=t.call(this,e,a)).state={showSideBar:!1},o}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.resetSavedLogos()}},{key:"componentDidUpdate",value:function(e,t){this.props.currentUser.rehydrated&&this.props.currentUser.token&&this.fetchIfNeeded()}},{key:"onLoadMore",value:function(){this.fetchSavedLogos()}},{key:"fetchIfNeeded",value:function(){this.props.currentUser.token&&(1!==this.props.saved.nextPage||this.props.saved.isLoading||this.fetchSavedLogos())}},{key:"fetchSavedLogos",value:function(){this.props.getSavedLogos({page:this.props.saved.nextPage,perPage:32})}},{key:"onSelectLogo",value:function(e){var t=Object(h.getBaseLocaleUrl)(this.props.i18n.language),n={logoId:e.id,config:JSON.parse(e.layoutConfig),purchased:e.purchased},i=window.open("".concat(k.default.webBaseUrl).concat(t,"app/edit"),"_blank");i?(i.editLogoConfig=JSON.stringify(n),i.shouldCloseTabOnBack=!0):(localStorage.setItem("editLogoConfig",JSON.stringify(n)),localStorage.setItem("shouldCloseTabOnBack",!0))}},{key:"getMyLogoSideBarContainerStyle",value:function(){var e=this.props.showSideBar,t=window.innerWidth;return{right:e?0:-(t<320?t:320)}}},{key:"render",value:function(){var e=this,t=u.a.isMobile(),n=t?this.props.showSideBar:this.state.showSideBar,i=this.props.saved,a=i.isLoading,o=i.logos||[],s=i.total,r=i.nextPage<=i.totalPages,l=this.props.preCheckout.editingLogoId;return this.props.currentUser.token&&s?c.a.createElement("div",{className:"my-logo-side-bar-container damped-sliding",style:t?this.getMyLogoSideBarContainerStyle():{}},!t&&c.a.createElement(p,{shouldShowBack:n,count:s,onClick:function(){e.setState({showSideBar:!e.state.showSideBar})}}),c.a.createElement(b,{active:n,logos:o,isLoading:a,hasNextPage:r,onLoadMore:this.onLoadMore.bind(this),onSelectLogo:this.onSelectLogo.bind(this),editingLogoId:l,onShowSavedLogos:this.props.onShowSavedLogos})):null}}]),n}(r.Component));t.a=Object(l.connect)((function(e){return{saved:e.profile.saved,currentUser:e.account.currentUser,preCheckout:e.preCheckout}}),(function(e){return{resetSavedLogos:function(){e(Object(w.Rc)())},setEditLogoConfig:function(t){e(Object(w.Wc)(t))},getSavedLogos:function(t){e(Object(w.Dc)(t))}}}))(Object(d.b)()(y))},1845:function(e,t,n){var i=n(833).ConfigDigester;e.exports=function(e,t){var n=i.extractComponentsFrame(t),a={frame:{origin:{x:0,y:0},size:{width:e.size.width,height:e.size.height}}};return i.areaOfIntersection(a,{frame:n})<=0}},1847:function(e,t,n){"use strict";var i=n(65),a=n(68),o=n(67),s=n(66),r=n(1),c=n.n(r),l=(n(2263),n(1793)),d=n(1771),h=n(734),u=n(124),p=n(1600),f=n(736),g=n(731),m=n.n(g),v=n(216),b=n.n(v),k={cloneDeep:m.a,get:b.a},w=f.a.isMobile(),y={root:{color:w?"#ffcb05":"#686AC9","&$checked":{color:w?"#ffcb05":"#686AC9"},width:36,height:36},checked:{},controlLabel:{margin:0},controlLabelText:{fontFamily:"'Ubuntu', sans-serif",color:w?"white":"rgba(0, 0, 0, 0.87)",lineHeight:"16px",fontSize:14}},C=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"handleCanvasColorChange",value:function(e){var t=k.cloneDeep(this.props.config.meta),n=e;t.canvasColor!==n&&(t.canvasColor=n,t.canvasColorInExport=!0,this.props.onMetaChange(t))}},{key:"toggleCanvasColorInExport",value:function(e){var t=k.cloneDeep(this.props.config.meta),n=e.target.checked;t.canvasColorInExport=n,n&&!t.canvasColor&&(t.canvasColor="ffffff"),this.props.onMetaChange(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,i=t.classes,a=t.config,o=k.get(a,"meta.canvasColor","ffffff"),s=k.get(a,"meta.canvasColorInExport",!1),r=n("edit-panel.background-in-export");return w&&(r+=" (".concat(n("home.pricing.plans.premium"),")")),c.a.createElement("div",{className:"background-color-control"},c.a.createElement(l.a,{control:c.a.createElement(d.a,{checked:s,onChange:function(t){e.toggleCanvasColorInExport(t)},classes:{root:i.root,checked:i.checked}}),label:r,classes:{root:i.controlLabel,label:i.controlLabelText}}),!w&&c.a.createElement("span",{className:"premium-label"},n("home.pricing.plans.premium")),c.a.createElement(p.a,{title:"",color:o,onChange:function(t){e.handleCanvasColorChange(t)},gradientDisabled:!0,anchorPosition:"bottom-right",onColorPopoverOpen:this.props.onColorPopoverOpen,onColorPopoverClose:this.props.onColorPopoverClose}))}}]),n}(r.Component);t.a=Object(h.a)(y)(Object(u.b)()(C))},1851:function(e,t,n){"use strict";var i=n(0),a=n(65),o=n(68),s=n(67),r=n(66),c=n(1),l=n.n(c),d=n(736),h=n(1093),u=n.n(h),p=n(225),f=n(1178),g=(n(2225),n(1179)),m={defaultCanvasSize:{width:535,height:331},minSideLength:20,magneticField:5,minDragDistance:2},v=n(1845),b=n.n(v),k=n(731),w=n.n(k),y=n(780),C=n.n(y),O=n(1094),E=n.n(O),x=n(897),S=n.n(x),D=n(1645),j=n.n(D),M=n(1081),z=n.n(M),I=n(1638),L=n.n(I),F={cloneDeep:w.a,forEach:C.a,indexOf:E.a,isEqual:S.a,includes:j.a,findIndex:z.a,delay:L.a},T=function(e){var t=F.cloneDeep(this.state.loadingIds);F.forEach(e,(function(e){var n=F.indexOf(t,e.id);n>=0&&!e.isLoading?t.splice(n,1):n<0&&e.isLoading&&t.push(e.id)})),F.isEqual(t,this.state.loadingIds)||this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{loadingIds:t})}))},A=function(e){this.setState((function(t){return Object(i.a)(Object(i.a)({},t),{},{guidingLines:e})}))},B=function(e){var t=this;if(F.isEqual(e,this.state.selectedIds))0===e.length&&this.props.onSelectComponents(e);else{if(!e.length){var n=this.state.stack.filter((function(e){return F.includes(t.state.selectedIds,e.id)})),i=[];n.forEach((function(e){b()(t.state.canvas,[e])&&i.push(e)})),i.length&&N.bind(this)(i)}this.props.onSelectComponents(e)}},N=function(e){this.props.onDeleteComponents(e)},R=function(e){this.setState((function(t){return Object(i.a)(Object(i.a)({},t),{},{panel:{padding:e}})}))},P=function(e){var t=e.dragSelectOrigin,n=e.dragSelectSize;this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isDragSelecting:!0,dragSelectInfo:{origin:t||{x:-9999,y:-9999},size:n||{width:0,height:0}}})}))},_=function(){this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isDragSelecting:!1,dragSelectInfo:null})}))},W=function(e){this.setState((function(t){return Object(i.a)(Object(i.a)({},t),{},{mouseDownOrigin:e})}))},G=function(e){var t=this,n=e.updatedStack,a=e.shouldPromptReport,o=e.userAction,s=F.cloneDeep(this.state.stack);n.forEach((function(e){var n=F.findIndex(s,{id:e.id});s[n]=e,a||F.includes(t.updatedIds,e.id)||t.updatedIds.push(e.id)})),this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:s,dragInfo:e.isDragging?Object(i.a)(Object(i.a)({},e.dragInfo),{},{isDragged:!0}):null,resizeInfo:e.isResizing?Object(i.a)(Object(i.a)({},e.resizeInfo),{},{isResized:!0}):null,rotateInfo:e.isRotating?Object(i.a)(Object(i.a)({},e.rotateInfo),{},{isRotated:!0}):null})}),(function(){a&&t.props.onComponentsChange(s.filter((function(e){return F.findIndex(n,{id:e.id})>=0})).map((function(e){return e.reportFormat})),{userAction:o,keepCenter:!1})}))},U=function(e){var t=this,n=e.updatedStack,a=e.shouldPromptReport,o=e.userAction,s=F.cloneDeep(this.state.stack);n.forEach((function(e){var n=s.find((function(t){return e.id===t.id}));n&&(n.frame.origin=e.updatedOrigin,n.cachedData&&(n.cachedData.origin=e.updatedOrigin)),a||F.includes(t.updatedIds,n.id)||t.updatedIds.push(n.id)})),this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:s,dragInfo:e.isDragging?Object(i.a)(Object(i.a)({},e.dragInfo),{},{isDragged:!0}):null})}),(function(){if(a){var e=new Date;t.updateComponentOriginTimestamp=e,F.delay((function(){t.updateComponentOriginTimestamp===e&&t.props.onComponentsChange(s.filter((function(e){return F.findIndex(n,{id:e.id})>=0})).map((function(e){return e.reportFormat})),{userAction:o,keepCenter:!1})}),200)}}))},X=function(e){this.setState((function(t){return Object(i.a)(Object(i.a)({},t),{},{latestKeyDown:e})}))},Y=function(e){this.setState((function(t){return Object(i.a)(Object(i.a)({},t),{},{hoveringIds:e})}))},Z=function(){this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{hoveringIds:[]})}))},q=function(e){var t=e.draggingStack,n=this.state,a=n.stack,o=n.selectedIds,s=t||F.cloneDeep(a.filter((function(e){return F.includes(o,e.id)})));this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isDragging:!0,dragInfo:{stack:s,isDragged:!1}})}))},K=function(){this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isDragging:!1,dragInfo:null})}))},V=function(e){var t=this,n=e.id,a=e.bbox,o=e.origin,s=this.state.stack,r=F.findIndex(s,{id:n}),c=s[r];a&&(c.cachedData.bbox=a),o&&(c.cachedData.origin=o),this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:s})}),(function(){T.bind(t)([{id:n,isLoading:!1}])}))},H=function(e){var t=e.id,n=this.state.stack,a=F.findIndex(n,{id:t});n[a].cachedData={},this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:n})}))},J=function(e){var t=this,n=e.id,a=e.frameSize,o=e.origin,s=e.bbox,r=F.cloneDeep(this.state.stack),c=F.findIndex(r,{id:n}),l=r[c];a&&(l.frame.size=a),o&&(l.frame.origin=o,l.cachedData.origin=o),s&&(l.cachedData.bbox=s),this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:r})}),(function(){var e=new Date;t.updateTextComponentFrameSizeTimestamp=e,F.delay((function(){t.updateTextComponentFrameSizeTimestamp===e&&(t.props.onComponentsChange([l.reportFormat],{userAction:!1,keepCenter:!1}),T.bind(t)([{id:n,isLoading:!1}]))}),200)}))},$=function(e){var t=this,n=e.id,a=e.frameSize,o=e.bbox,s=F.cloneDeep(this.state.stack),r=F.findIndex(s,{id:n}),c=s[r];c.frame.size=a,o&&(c.cachedData.bbox=o),this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:s})}),(function(){t.props.onComponentsChange([c.reportFormat],{userAction:!1,keepCenter:!1}),T.bind(t)([{id:n,isLoading:!1}])}))},Q=function(e){var t=e.mode,n=this.state,a=n.stack,o=n.selectedIds,s=F.cloneDeep(a.filter((function(e){return F.includes(o,e.id)})));this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isResizing:!0,resizeInfo:{stack:s,mode:t}})}))},ee=function(){this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isResizing:!1,resizeInfo:null})}))},te=function(){var e=this.state,t=e.stack,n=e.selectedIds,a=F.cloneDeep(t.filter((function(e){return F.includes(n,e.id)})));this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isRotating:!0,rotateInfo:{stack:a}})}))},ne=function(){this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{isRotating:!1,rotateInfo:null})}))},ie=n(898),ae=n(899),oe=n(1768),se=n(833),re=n(909),ce=n(1733),le=n(2228),de=n.n(le),he=n(2229),ue=n(783),pe=n.n(ue),fe=n(216),ge=n.n(fe),me={findIndex:z.a,cloneDeep:w.a,set:pe.a,get:ge.a,indexOf:E.a},ve=["se","sw","nw","ne"],be=["n","s","w","e"],ke=["w","e"];var we=function(e){var t=this.state,n=t.canvas,i=t.mouseDownOrigin,a=t.stack,o=e.x-i.x,s=e.y-i.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state.resizeInfo,h=d.stack,u=d.mode,p=me.cloneDeep(h),f=p[0],g=f.frame,v=g.origin,b=g.size,k=v.x+b.width/2,w=v.y+b.height/2,y=me.get(f,"transform.rotate")||0,C=de()(f,u),O=function(e){var t=["se","s","sw","w","nw","n","ne","e"];if(t.indexOf(e)>=0){var n=t.indexOf(e);return t[(n+4)%8]}return e}(u),E=de()(f,O),x=a.filter((function(e){return me.findIndex(p,{id:e.id})<0})),S=Object(oe.getGuidelinesFromExisting)(n,x),D=m.minSideLength,j=m.minSideLength;if(me.indexOf(ve,u)>=0){var M=Object(he.getDeltaWithResizeMode)(r,c,u,y),z=M.deltaX,I=M.deltaY,L=0;L=b.width>b.height?D/b.width:j/b.height;var F=b.width+z,T=b.height+I,B=Math.max(F+T,0)/(b.width+b.height);B=Math.max(B,L);var N,R={width:b.width*B,height:b.height*B},P={x:E.x+(k-E.x)*B,y:E.y+(w-E.y)*B},_={x:P.x-R.width/2,y:P.y-R.height/2},W=Object(oe.constructGuidelines)("RESIZING",_,R,y,u);Object(oe.getMatchedGuidingLines)(S,W,l).forEach((function(e,t){var n;if("horizontal"===e.axis){var i=E.y-C.y;n=(E.y-e.value)/i}else{var a=E.x-C.x;n=(E.x-e.value)/a}if(N){var o=Math.abs(Math.abs(N)-Math.abs(B));Math.abs(Math.abs(n)-Math.abs(B))<o&&(N=n)}else N=n})),N||(N=B);var U={width:b.width*N,height:b.height*N},X={x:E.x+(k-E.x)*N,y:E.y+(w-E.y)*N},Y={x:X.x-U.width/2,y:X.y-U.height/2};if(f.frame.size=U,f.frame.origin=Y,"text"===f.type&&(f.data.fontSize*=N),me.get(f,"data.stroke.width")&&(f.data.stroke.width*=N),f.data.bbox&&(f.data.bbox=Object(ce.scaleBboxWithRatio)(f.data.bbox,N)),"text"===f.type){var Z=me.get(f,"cachedData.bbox");Z&&(f.cachedData.bbox=Object(ce.scaleBboxWithRatio)(Z,N)),me.set(f,"cachedData.origin",f.frame.origin)}G.bind(this)({updatedStack:[f]});var q=Object(oe.constructGuidelines)("RESIZING",Y,U,y),K=Object(oe.getMatchedGuidingLines)(S,q,.5,!0);A.bind(this)(K)}else if(me.indexOf(be,u)>=0){b.height>b.width?(D=1,j=4):(D=4,j=1);var V=Object(he.getDeltaWithResizeMode)(r,c,u,y),H=V.deltaX,J=V.deltaY,$={width:Math.max(b.width+H,D),height:Math.max(b.height+J,j)},Q=H?$.width/b.width:$.height/b.height,ee={x:E.x+(k-E.x)*Q,y:E.y+(w-E.y)*Q},te={x:ee.x-$.width/2,y:ee.y-$.height/2},ne=Object(oe.constructGuidelines)("RESIZING",te,$,y,u),ie=Object(oe.getMatchedGuidingLines)(S,ne,l),ae=Object(oe.getInfoWithMatchedGuidingLines)(ie),se=ae.magnitisedDeltaX,le=ae.magnitisedDeltaY,ue=0,pe=0;void 0===se&&void 0===le||(void 0!==se&&void 0!==le?(ue=Math.abs(se)<=Math.abs(le)?se:0,pe=Math.abs(le)<Math.abs(se)?le:0):(ue=se||0,pe=le||0),y%90!==0&&(ke.indexOf(u)>=0?ue?pe=ue*Math.tan(Object(re.degreeToRadian)(y)):pe&&(ue=pe/Math.tan(Object(re.degreeToRadian)(y))):ue?pe=-ue/Math.tan(Object(re.degreeToRadian)(y)):pe&&(ue=-pe*Math.tan(Object(re.degreeToRadian)(y)))));var fe=r+ue,ge=c+pe,we=Object(he.getDeltaWithResizeMode)(fe,ge,u,y),ye=we.deltaX,Ce=we.deltaY,Oe={width:Math.max(b.width+ye,D),height:Math.max(b.height+Ce,j)},Ee=ye?Oe.width/b.width:Oe.height/b.height,xe={x:E.x+(k-E.x)*Ee,y:E.y+(w-E.y)*Ee},Se={x:xe.x-Oe.width/2,y:xe.y-Oe.height/2};p.forEach((function(e){e.frame.size=Oe,e.frame.origin=Se})),G.bind(this)({updatedStack:p});var De=Object(oe.constructGuidelines)("RESIZING",Se,Oe,y),je=Object(oe.getMatchedGuidingLines)(S,De,.5,!0);A.bind(this)(je)}},ye=n(2230),Ce={findIndex:z.a,cloneDeep:w.a,set:pe.a,get:ge.a,indexOf:E.a},Oe=function(e){var t=this.state,n=t.canvas,i=t.mouseDownOrigin,a=t.stack,o=e.x-i.x,s=e.y-i.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state.resizeInfo,h=d.stack,u=d.mode,p=Ce.cloneDeep(h),f=se.ConfigDigester.extractComponentsFrame(p),g=f.origin,v=f.size,b=v.height/v.width,k=a.filter((function(e){return Ce.findIndex(p,{id:e.id})<0})),w=Object(oe.getGuidelinesFromExisting)(n,k),y=m.minSideLength,C=m.minSideLength;if(Ce.indexOf(["nw","ne","sw","se"],u)>=0){var O=Object(ye.getDeltaWithResizeMode)(r,c,u),E=O.deltaX,x=O.deltaY,S=0;S=v.width>v.height?y/v.width:C/v.height;var D=v.width+E,j=v.height+x,M=Math.max(D+j,0)/(v.width+v.height);M=Math.max(M,S);var z={width:v.width*M,height:v.height*M},I=v.width-z.width,L=v.height-z.height,F=Object(ye.getOriginChangeWithResizeMode)(I,L,u),T=F.originChangeX,B=F.originChangeY,N={x:g.x+T,y:g.y+B},R=Object(oe.constructGuidelines)("RESIZING",N,z,0,u),P=Object(oe.getMatchedGuidingLines)(w,R,l),_=Object(oe.getInfoWithMatchedGuidingLines)(P),W=_.magnitisedDeltaX,U=_.magnitisedDeltaY,X=_.verticalGuidingLines,Y=_.horizontalGuidingLines,Z=Object(ye.getDeltaWithResizeMode)(W,U,u),q=Z.deltaX,K=Z.deltaY,V=b;void 0!==q&&void 0!==K?V=q?Math.abs(K/q):100:void 0!==q?V=100:void 0!==K&&(V=0);var H=M;V>b?(P=X,H=(z.width+q)/v.width):V<b&&(P=Y,H=(z.height+K)/v.height),H=Math.max(H,S),se.ConfigDigester.resizeComponents(p,{scale:H,anchor:Object(ye.getAnchorWithMode)(u)}),p.forEach((function(e){if(e.data.bbox&&(e.data.bbox=Object(ce.scaleBboxWithRatio)(e.data.bbox,H)),"text"===e.type){var t=Ce.get(e,"cachedData.bbox");t&&(e.cachedData.bbox=Object(ce.scaleBboxWithRatio)(t,H)),Ce.set(e,"cachedData.origin",e.frame.origin)}})),G.bind(this)({updatedStack:p});var J=se.ConfigDigester.extractComponentsFrame(p),$=Object(oe.constructGuidelines)("RESIZING",J.origin,J.size,0,u),Q=Object(oe.getMatchedGuidingLines)(w,$,l);A.bind(this)(Q)}},Ee={findIndex:z.a,cloneDeep:w.a,set:pe.a,includes:j.a,indexOf:E.a,delay:L.a},xe=function(e){W.bind(this)(e)},Se=function(){var e=this.state,t=e.isDragSelecting,n=e.hoveringIds,i=e.isDragging,a=e.isResizing,o=e.isRotating,s=e.guidingLines;i&&K.bind(this)(),a&&ee.bind(this)(),s.length&&A.bind(this)([]),t&&(_.bind(this)(),n&&n.length&&(B.bind(this)(n),Z.bind(this)())),o&&ne.bind(this)()},De=function(e){var t=this.state,n=t.canvas,i=t.mouseDownOrigin,a=t.stack;if(i&&n){var o=e.x-i.x,s=e.y-i.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state,h=d.isDragging,u=d.dragInfo;if(h){var p=u.stack,f=u.isDragged,g=se.ConfigDigester.extractComponentsFrame(p);if(!f){var v=Math.abs(o)>=m.minDragDistance,b=Math.abs(s)>=m.minDragDistance;if(!v&&!b)return}var k={x:g.origin.x+r,y:g.origin.y+c},w=Object(oe.constructGuidelines)("DRAGGING",k,g.size),y=a.filter((function(e){return Ee.findIndex(p,{id:e.id})<0})),C=Object(oe.getGuidelinesFromExisting)(n,y),O=Object(oe.getMatchedGuidingLines)(C,w,l),E=Object(oe.getInfoWithMatchedGuidingLines)(O),x=E.magnitisedDeltaX,S=void 0===x?0:x,D=E.magnitisedDeltaY,j=void 0===D?0:D,M={x:k.x+S,y:k.y+j},z=Ee.cloneDeep(p);se.ConfigDigester.translateComponents(z,{x:r+S,y:c+j}),U.bind(this)({updatedStack:z.map((function(e){return{id:e.id,updatedOrigin:e.frame.origin}}))});var I=Object(oe.constructGuidelines)("DRAGGING",M,g.size),L=Object(oe.getMatchedGuidingLines)(C,I,.5,!0);A.bind(this)(L)}var F=this.state,T=F.isResizing,B=F.resizeInfo;T&&(1===B.stack.length?we.bind(this)(e):Oe.bind(this)(e));var N=this.state,R=N.isDragSelecting,_=N.panel;if(R){var W=this.refs["work-station"].getBoundingClientRect(),X={x:(i.x-W.left-_.padding.horizontal)/n.scale,y:(i.y-W.top-_.padding.vertical)/n.scale},Z={x:(e.x-W.left-_.padding.horizontal)/n.scale,y:(e.y-W.top-_.padding.vertical)/n.scale},q={x:Math.min(X.x,Z.x),y:Math.min(X.y,Z.y)},K={width:Math.abs(X.x-Z.x),height:Math.abs(X.y-Z.y)};P.bind(this)({dragSelectOrigin:q,dragSelectSize:K});var V={frame:{origin:q,size:K}},H=this.state.stack.filter((function(e){return se.ConfigDigester.areaOfIntersection(V,e)>0}));Y.bind(this)(H.map((function(e){return e.id})))}var J=this.state,$=J.isRotating,Q=J.rotateInfo;if($){var ee=Q.stack,te=se.ConfigDigester.extractComponentsFrame(ee),ne={x:te.origin.x+te.size.width/2,y:te.origin.y+te.size.height/2},ie={x:ne.x*n.scale,y:ne.y*n.scale},ae=this.refs["work-station-content"].getBoundingClientRect(),ce={x:e.x-ae.left,y:e.y-ae.top},le=Object(re.getAngleWithTwoPoints)(ie,ce),de=Object(re.normalizedDegree)(Math.round(le+90)),he=de%90;if((he<3||he>87)&&(de=he<3?de-he:de+(90-he)),360===de&&(de=0),1===ee.length){G.bind(this)({updatedStack:ee.map((function(e){return Ee.set(e,"transform.rotate",de),e}))});var ue=Object(oe.constructGuidelines)("ROTATING",te.origin,te.size),pe=a.filter((function(e){return Ee.findIndex(ee,{id:e.id})<0})),fe=Object(oe.getGuidelinesFromExisting)(n,pe),ge=Object(oe.getMatchedGuidingLines)(fe,ue,.5,!0);A.bind(this)(ge)}}}},je=function(e){var t=this,n=ie.a.checkFeatureAvailable(this.props.featureList,ae.X),i=ie.a.checkFeatureAvailable(this.props.featureList,ae.W),a=e.keyCode,o=e.ctrlKey,s=e.metaKey,r=e.shiftKey,c=this.state,l=c.canvas,d=c.stack,h=c.selectedIds,u=Ee.cloneDeep(d),p=u.filter((function(e){return Ee.includes(h,e.id)})),f=se.ConfigDigester.extractComponentsFrame(p),g=new Date;X.bind(this)(g);var m=p.length&&Ee.indexOf([37,38,39,40],a)>=0,v=p.length&&Ee.indexOf([8,46],a)>=0,b=(o||s)&&!r&&90===a,k=(o||s)&&89===a||(o||s)&&r&&90===a;if(m&&n){e.preventDefault();var w=0,y=0;37===a?w=-1:38===a?y=-1:39===a?w=1:40===a&&(y=1);var C=5*l.scale,O=l.size.width-(f.origin.x+w),E=f.origin.x+w+f.size.width,x=l.size.height-(f.origin.y+y),S=f.origin.y+y+f.size.height;if(0!==w&&(O<C||E<C))return;if(0!==y&&(x<C||S<C))return;p.forEach((function(e){var t=e.frame.origin;e.frame.origin={x:t.x+w,y:t.y+y}}));var D=p.map((function(e){return{id:e.id,updatedOrigin:e.frame.origin}}));U.bind(this)({updatedStack:D,userAction:!0,shouldPromptReport:!0});var j=u.filter((function(e){return!Ee.includes(h,e.id)})),M=Object(oe.getGuidelinesFromExisting)(l,j),z=se.ConfigDigester.extractComponentsFrame(p),I=Object(oe.constructGuidelines)("group",z.origin,z.size),L=Object(oe.getMatchedGuidingLines)(M,I,.5,!0);A.bind(this)(L),Ee.delay((function(){t.state.latestKeyDown===g&&A.bind(t)([])}),800)}v&&i&&N.bind(this)(p),b&&(e.preventDefault(),this.props.onUndoChange()),k&&(e.preventDefault(),this.props.onRedoChange())},Me=function(){var e=this.state,t=e.isDragging,n=e.isResizing;t||n||B.bind(this)([]),P.bind(this)({})},ze=function(e){R.bind(this)(e)},Ie={includes:j.a},Le=function(e){var t=this.state,n=t.isDragging,i=t.isDragSelecting,a=t.selectedIds,o=Ie.includes(a,e);n||i||o||Y.bind(this)([e])},Fe=function(e){var t=this.state,n=t.isDragging,i=t.isDragSelecting,a=t.selectedIds,o=Ie.includes(a,e);n||i||o||Z.bind(this)()},Te=function(e){var t=this.state,n=t.selectedIds,i=t.isDragging,a=t.hoveringIds;Ie.includes(a,e.id)&&Z.bind(this)(),Ie.includes(n,e.id)||B.bind(this)([e.id]);var o=ie.a.checkFeatureAvailable(this.props.featureList,ae.X);!i&&o&&q.bind(this)({draggingStack:[e]})},Ae=function(e){V.bind(this)(e)},Be=function(e){H.bind(this)(e)},Ne=function(e){T.bind(this)([e])},Re=function(e){J.bind(this)(e)},Pe=function(e){$.bind(this)(e)},_e=function(e){Q.bind(this)(e)},We=function(e){ie.a.checkFeatureAvailable(this.props.featureList,ae.X)&&q.bind(this)({})},Ge=function(){te.bind(this)()},Ue={canvas:{size:{width:535,height:331},scale:1},selectedIds:[],stack:[],panel:{padding:{horizontal:50,vertical:50}},loadingIds:[],hoveringIds:[],isDragSelecting:!1,dragSelectInfo:null,isResizing:!1,resizeInfo:null,isDragging:!1,dragInfo:null,isRotating:!1,rotateInfo:null,guidelines:[],guidingLines:[],mouseDownOrigin:null,latestKeyDown:null},Xe=n(2231),Ye=n(2264),Ze=n.n(Ye),qe=n(124);function Ke(){var e=Object(f.a)(["\n  border: 0.5px solid #FFF065;\n  pointer-events: none;\n  position: absolute;\n\ttransform: rotateZ(0rad);\n\tz-index: 1000;\n"]);return Ke=function(){return e},e}var Ve=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height,top:e.top,left:e.left}}})(Ke()),He=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.panel,n=e.canvas,i=e.guidingLine,a=i.axis,o=i.value,s=i.endPoints,r=s[1]-s[0],c="horizontal"===a?r:0,d="vertical"===a?r:0,h="vertical"===a?s[0]:o,u="vertical"===a?o:s[0];return l.a.createElement(Ve,{className:"guiding-line",width:c*n.scale,height:d*n.scale,top:h*n.scale+t.padding.vertical,left:u*n.scale+t.padding.horizontal})}}]),n}(c.Component);function Je(){var e=Object(f.a)(["\n  border: 1px dashed white;\n  pointer-events: none;\n  position: absolute; \n  opacity: 0.2;\n  background-color: rgb(67, 91, 88);\n\tanimation: "," 0.3s;\n\tz-index: 1000;\n"]);return Je=function(){return e},e}function $e(){var e=Object(f.a)(["\n  from { opacity: 0; }\n  to   { opacity: 0.2; }\n"]);return $e=function(){return e},e}var Qe={get:ge.a},et=Object(g.b)($e()),tt=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height,top:e.top,left:e.left,transform:"rotateZ(".concat(e.rotate,"deg)"),WebkitTransform:"rotateZ(".concat(e.rotate,"deg)"),msTransform:"rotateZ(".concat(e.rotate,"deg)")}}})(Je(),et),nt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.panel,n=e.canvas,i=e.hoveringElem,a=n.scale,o=i.frame.origin,s=o.x,r=o.y,c=i.frame.size,d=c.width,h=c.height,u=Qe.get(i,"transform.rotate",0);return l.a.createElement(tt,{className:"highlight-frame",width:d*a,height:h*a,top:r*a+t.padding.vertical,left:s*a+t.padding.horizontal,rotate:u})}}]),n}(c.Component);n(2242);function it(){var e=Object(f.a)(["\n  width: 0px; \n  height: 16px;\n  position: absolute;\n  border: 1px dashed rgb(104, 106, 210);\n  pointerEvents: none\n"]);return it=function(){return e},e}function at(){var e=Object(f.a)(["\n  width: 0px; \n  height: 30px;\n  position: absolute;\n  border: 1px dashed rgb(104, 106, 210);\n  pointerEvents: none\n"]);return at=function(){return e},e}function ot(){var e=Object(f.a)(["\n  border-color: rgb(104, 106, 210);\n  background-color: #ffffff;\n"]);return ot=function(){return e},e}function st(){var e=Object(f.a)(["\n  border-radius: ","px;\n  border-color: rgb(255, 255, 255);\n  background-color: #686AC9;\n"]);return st=function(){return e},e}function rt(){var e=Object(f.a)(["\n  position: absolute;\n  opacity: 1;\n  z-index: 1;\n  display: block;\n  border-width: ","px\n  border-style: solid\n  box-sizing: border-box;\n  width: ","px;\n  height: ","px;\n  visibility: visible;\n  pointer-events: auto;\n"]);return rt=function(){return e},e}function ct(){var e=Object(f.a)(["\n  position: absolute;\n  border: 1px dashed #686AC9;\n  pointer-events: ",";\n"]);return ct=function(){return e},e}function lt(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  z-index: 1000;\n  pointer-events: none;\n"]);return lt=function(){return e},e}var dt={get:ge.a},ht=d.a.isMobile(),ut=ht?16:12,pt=(ut+2)/2,ft=g.a.div.attrs({style:function(e){return{top:e.top,left:e.left}}})(lt()),gt=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height,transform:"rotateZ(".concat(e.rotate,"deg)"),WebkitTransform:"rotateZ(".concat(e.rotate,"deg)"),msTransform:"rotateZ(".concat(e.rotate,"deg)")}}})(ct(),(function(e){return e.isMultipleSelection?"auto":"none"})),mt=g.a.div(rt(),2,ut,ut),vt=Object(g.a)(mt).attrs({style:function(e){return{top:e.top,left:e.left}}})(st(),ut/2),bt=Object(g.a)(mt).attrs({style:function(e){return{top:e.top,left:e.left}}})(ot()),kt=g.a.div.attrs({style:function(e){return{top:-30,left:e.left}}})(at()),wt=g.a.div.attrs({style:function(e){return{top:e.top,left:e.left}}})(it()),yt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"_handleMouseDown",value:function(e){e.stopPropagation(),this.props.onSelectedFrameAction({type:"selectedFrameMouseDown",info:null})}},{key:"_resizeMouseDown",value:function(e,t){t.stopPropagation(),this.props.onSelectedFrameAction({type:"resizeMouseDown",info:{mode:e}})}},{key:"_rotateMouseDown",value:function(e){e.stopPropagation(),this.props.onSelectedFrameAction({type:"rotateMouseDown",info:null})}},{key:"_handleTouchStart",value:function(e){this._handleMouseDown(e)}},{key:"_resizeTouchStart",value:function(e,t){this._resizeMouseDown(e,t)}},{key:"_rotateTouchStart",value:function(e){this._rotateMouseDown(e)}},{key:"getTextWidth",value:function(e,t){var n=(this.getTextWidth.canvas||(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return n.font=t,n.measureText(e).width}},{key:"getCursor",value:function(e,t){var n=["se","s","sw","w","nw","n","ne","e"].indexOf(e),i=Object(re.normalizedDegree)(t+22.5);return["ldr","vr","rdr","hr","ldr","vr","rdr","hr"][(n+Math.floor(i/45))%8]}},{key:"render",value:function(){var e=this.props,t=e.resizable,n=e.rotatable,i=this.props,a=i.panel,o=i.canvas,s=i.selectedElem,r=i.isDragging,c=i.isResizing,d=i.isRotating,h=i.resizeInfo,u="group"===s.type,p=dt.get(s,"transform.rotate",0),f=s.frame.origin.x,g=s.frame.origin.y;s.frame.size.width,o.scale;if(r&&!0,c)switch(h.mode){case"se":f+=s.frame.size.width,g+=s.frame.size.height,s.frame.size.height*o.scale,!1;break;case"ne":f+=s.frame.size.width,!1;break;case"sw":g+=s.frame.size.height,s.frame.size.height*o.scale}f=Math.round(f),g=Math.round(g);"".concat(f,",").concat(g);var m=!1,v=!1,b=!1,k=!1,w=!1;t&&("shape"===s.type?(c&&!0,m=!0,v=!0,b=!0,k=!0,w=!0):"line"!==s.type?(c&&!0,m=!0):s.frame.size.width<s.frame.size.height?(v=!0,w=!0):(k=!0,b=!0));var y=ht&&"line"===s.type&&t&&n,C=p||0,O="".concat(C,"\xb0");return l.a.createElement(ft,{className:"selected-frame",top:s.frame.origin.y*o.scale+a.padding.vertical,left:s.frame.origin.x*o.scale+a.padding.horizontal},l.a.createElement(gt,{className:"cursor-move",width:s.frame.size.width*o.scale,height:s.frame.size.height*o.scale,onMouseDown:this._handleMouseDown.bind(this),onTouchStart:this._handleTouchStart.bind(this),isMultipleSelection:u,rotate:p},m&&l.a.createElement(vt,{kind:"nw",className:this.getCursor("nw",C),top:-pt,left:-pt,onMouseDown:this._resizeMouseDown.bind(this,"nw"),onTouchStart:this._resizeTouchStart.bind(this,"nw")}),m&&l.a.createElement(vt,{kind:"ne",className:this.getCursor("ne",C),top:-pt,left:-pt+s.frame.size.width*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"ne"),onTouchStart:this._resizeTouchStart.bind(this,"ne")}),m&&l.a.createElement(vt,{kind:"sw",className:this.getCursor("sw",C),top:-pt+s.frame.size.height*o.scale,left:-pt,onMouseDown:this._resizeMouseDown.bind(this,"sw"),onTouchStart:this._resizeTouchStart.bind(this,"sw")}),m&&l.a.createElement(vt,{kind:"se",className:this.getCursor("se",C),top:-pt+s.frame.size.height*o.scale,left:-pt+s.frame.size.width*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"se"),onTouchStart:this._resizeTouchStart.bind(this,"se")}),k&&l.a.createElement(bt,{kind:"w",className:this.getCursor("w",C),left:-pt,top:-pt+s.frame.size.height/2*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"w"),onTouchStart:this._resizeTouchStart.bind(this,"w")}),b&&l.a.createElement(bt,{kind:"e",className:this.getCursor("e",C),left:-pt+s.frame.size.width*o.scale,top:-pt+s.frame.size.height/2*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"e"),onTouchStart:this._resizeTouchStart.bind(this,"e")}),v&&l.a.createElement(bt,{kind:"n",className:this.getCursor("n",C),left:-pt+s.frame.size.width/2*o.scale,top:-pt,onMouseDown:this._resizeMouseDown.bind(this,"n"),onTouchStart:this._resizeTouchStart.bind(this,"n")}),w&&l.a.createElement(bt,{kind:"s",className:this.getCursor("s",C),left:-pt+s.frame.size.width/2*o.scale,top:-pt+s.frame.size.height*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"s"),onTouchStart:this._resizeTouchStart.bind(this,"s")}),n&&l.a.createElement(kt,{left:s.frame.size.width/2*o.scale},l.a.createElement("div",{kind:"rotate",className:"cursor-rotate",style:{position:"absolute",width:20,height:20,borderRadius:10,background:"rgb(255, 255, 255)",visibility:"visible",marginLeft:-10,top:-20,pointerEvents:"auto"},onMouseDown:this._rotateMouseDown.bind(this),onTouchStart:this._rotateMouseDown.bind(this)},l.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 15 14",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-7,marginTop:-7}},l.a.createElement("path",{fill:"#4B596E",d:"M12.378,10.467L15,6.489h-1.384c-0.26-3.254-2.961-5.752-6.297-5.752c-1.688,0-3.276,0.651-4.47,1.834 C1.657,3.754,1,5.327,1,7c0,3.453,2.835,6.263,6.32,6.263c1.425,0,2.77-0.461,3.891-1.33l0.315-0.244l-1.521-1.609l-0.262,0.191 c-0.706,0.516-1.546,0.787-2.423,0.787c-2.257,0-4.096-1.822-4.096-4.061c0-2.24,1.837-4.063,4.096-4.063 c2.094,0,3.811,1.532,4.063,3.551H9.759L12.378,10.467z"})),d&&l.a.createElement("div",{style:{position:"absolute",fontFamily:"roboto",fontSize:14,fontWeight:"regular",top:-2*ut,left:-pt,color:"#5b616b",width:40,textAlign:"center",transform:"rotateZ(-".concat(C,"deg)"),WebkitTransform:"rotateZ(-".concat(C,"deg)"),msTransform:"rotateZ(-".concat(C,"deg)")}},O))),y&&l.a.createElement(wt,{top:s.frame.size.height*o.scale,left:s.frame.size.width/2*o.scale},l.a.createElement("div",{kind:"rotate",className:"cursor-dragndrop",style:{position:"absolute",width:20,height:20,borderRadius:10,background:"rgb(255, 255, 255)",visibility:"visible",marginLeft:-10,bottom:-20,pointerEvents:"auto"},onMouseDown:this._handleMouseDown.bind(this),onTouchStart:this._handleTouchStart.bind(this)},l.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 1024 1024",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-7,marginTop:-7}},l.a.createElement("path",{fill:"#333333",d:"M1019.29412 500.853792l-169.529986-169.529986a15.55321 15.55321 0 0 0-26.440456 10.887247v118.204394h-259.220163v-259.220163h117.685954a15.55321 15.55321 0 0 0 10.887247-26.958896L523.146729 4.706401a15.55321 15.55321 0 0 0-22.292934 0L331.323809 174.236388a15.55321 15.55321 0 0 0 10.887247 26.958896h118.204394v259.220163h-259.220162V342.211053a15.55321 15.55321 0 0 0-26.958897-10.887247L4.706404 500.853792a15.55321 15.55321 0 0 0 0 22.292934l169.529987 169.529986a15.55321 15.55321 0 0 0 26.958897-10.887246v-117.685954h259.220162v259.220162H342.211056a15.55321 15.55321 0 0 0-10.887247 26.440457l169.529986 169.529986a15.55321 15.55321 0 0 0 22.292934 0l169.529987-169.529986a15.55321 15.55321 0 0 0-10.887247-26.440457h-117.685954v-259.220162h259.220163v117.685954a15.55321 15.55321 0 0 0 26.440456 10.887246l169.529986-169.529986a15.55321 15.55321 0 0 0 0-22.292934z"})))),null))}}]),n}(c.Component),Ct=n(1816),Ot=n(1815),Et=n(1641);function xt(){var e=Object(f.a)(["\n  user-select: none;\n  position: absolute;\n  background: ",";\n"]);return xt=function(){return e},e}var St={get:ge.a},Dt=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height}}})(xt(),(function(e){return e.backgroundColor})),jt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.canvas,i=t.elem,a=n.scale,o=i.frame.size,s=o.width,r=o.height,c=i.data.tintColor;if("string"===typeof c)e="#".concat(c);else if("object"===typeof c){var d=Object(re.normalizedDegree)(c.degree),h=St.get(i,"transform.flip",{h:!1,v:!1});h.h&&(d=-d),h.v&&(d=180-d),e="linear-gradient(\n        ".concat(d+180,"deg, \n        #").concat(c.stack[0].color," ").concat(100*c.stack[0].offset,"%, \n        #").concat(c.stack[1].color," ").concat(100*c.stack[1].offset,"%\n      )")}else e="#000000";return l.a.createElement(Et.a,{canvas:n,elem:i,onBaseComponentAction:this.props.onBaseComponentAction},l.a.createElement(Dt,{className:"line-component",width:s*a,height:r*a,backgroundColor:e}))}}]),n}(c.Component),Mt=n(1817);function zt(){var e=Object(f.a)(["\n  border: 1px solid black;\n  pointer-events: none;\n  position: absolute;\n  opacity: 0.2;\n  background-color: #888888;\n\ttransform: rotateZ(0rad);\n\tz-index: 1000;\n"]);return zt=function(){return e},e}var It=g.a.div.attrs({style:function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}}})(zt()),Lt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dragSelectInfo,n=e.canvas,i=e.panel;return l.a.createElement(It,{className:"drag-select-frame",width:t.size.width*n.scale,height:t.size.height*n.scale,top:t.origin.y*n.scale+i.padding.vertical,left:t.origin.x*n.scale+i.padding.horizontal})}}]),n}(c.Component),Ft=n(9),Tt=n(52),At=n(2243),Bt=n.n(At),Nt=(n(2258),n(2259),n(2260),n(2261)),Rt=n.n(Nt),Pt=n(1743),_t=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"handleArticleClick",value:function(e){Ft.a.event({category:"Article",action:"ClickArticle",label:e}),Tt.a.submitSelectContentEvent("article",e),window.open(e,"_blank")}},{key:"getSliderSlides",value:function(){var e=this,t=this.props.editingTips;if(t){var n=[];return t.forEach((function(t,i){n.push(l.a.createElement("div",{className:"slide",key:i},l.a.createElement("div",{className:"slide-content"},l.a.createElement("div",{className:"editing-tips"},l.a.createElement("div",{className:"article-container"},l.a.createElement("div",{className:"tips-article",onClick:e.handleArticleClick.bind(e,t.info.contentUrl),key:i},l.a.createElement("div",{className:"article-image",style:{backgroundImage:"url(".concat(t.info.imageUrl,")")}}),l.a.createElement("div",{className:"article-details"},l.a.createElement("div",{className:"article-title"},t.info.title),l.a.createElement("div",{className:"article-description"},t.info.desc),l.a.createElement("div",{className:"bottom-cover"}))))))))})),n}return l.a.createElement("div",{className:"slide"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,i=t.isShowingTipsCarousel,a={className:"adsSlider",dots:!1,infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e4,pauseOnHover:!0,arrows:!0,swipe:!1},o=!(t.menuItem===Pt.f)&&i,s="carousel-container damped-sliding";return o||(s+=" hide-carousel"),l.a.createElement("div",{className:s},l.a.createElement("div",{className:"editing-tips-header"},l.a.createElement("div",{className:"header-title"},n("edit-panel.tips.editing-tips")),l.a.createElement("div",{className:"header-more",onClick:function(){return e.props.onMenuClick(Pt.f)}},n("common.load-more"))),l.a.createElement(Bt.a,a,this.getSliderSlides()),l.a.createElement("div",{className:"toggle-button",onClick:this.props.onToggleButtonClick},o?l.a.createElement(Rt.a,null):l.a.createElement("i",{className:"fa fa-lightbulb-o","aria-hidden":"true"})))}}]),n}(c.Component),Wt=Object(qe.b)()(_t),Gt=(n(2262),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.content;return l.a.createElement("div",{className:"editing-alert-view"},l.a.createElement("p",null,e))}}]),n}(c.Component)),Ut=n(1723),Xt=n(1795),Yt=n(1796),Zt=n(1847),qt=n(1080),Kt=n.n(qt);function Vt(){var e=Object(f.a)(["\n  pointer-events: none;\n"]);return Vt=function(){return e},e}function Ht(){var e=Object(f.a)(["\n  z-index: 1;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: ",";\n  background-size: contain;\n  pointer-events: none;\n"]);return Ht=function(){return e},e}var Jt={cloneDeep:w.a,includes:j.a,find:Kt.a,isEqual:S.a,get:ge.a},$t=g.a.div(Ht(),(function(e){return e.shouldShowWatermark?"url(/watermark.png)":"none"})),Qt=g.a.div(Vt()),en=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this,e)).updatePanelPadding=function(){var e=o.refs["work-station"].getBoundingClientRect(),t=o.refs["work-station-content"].getBoundingClientRect();ze.bind(Object(p.a)(o))({vertical:t.top-e.top,horizontal:t.left-e.left})};var s=e.config?Object(Xe.getStackFromConfig)(Jt.cloneDeep(e.config.components)):[],r=e.selectedComponents?e.selectedComponents.map((function(e){return e.id})):[],c=e.canvasSize||m.defaultCanvasSize,l=e.currentScale||1;return o.state=Object(i.a)(Object(i.a)({},Ue),{},{stack:s,selectedIds:r,canvas:{size:c,scale:l}}),o.updatedIds=[],o.windowResizeTimestamp=null,o.isInitUpdated=!1,o}return Object(o.a)(n,[{key:"preventPullToRefresh",value:function(e){document.querySelector("body").style["overscroll-behavior"]="none";var t=!1;document.querySelector(e).addEventListener("touchstart",(function(e){if(1===e.touches.length){var n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=0===n}})),document.querySelector(e).addEventListener("touchmove",(function(e){t&&(t=!1,e.preventDefault())}))}},{key:"releasePullToRefresh",value:function(){document.querySelector("body").style["overscroll-behavior"]="auto"}},{key:"componentWillReceiveProps",value:function(e,t){var n=this,a=(e.config?Object(Xe.getStackFromConfig)(Jt.cloneDeep(e.config.components)):[]).map((function(e){if(Jt.includes(n.state.loadingIds,e.id)){var t=Jt.find(n.state.stack,{id:e.id});e.frame=t.frame}return e}));if(!Object(Xe.isSameStack)(a,this.state.stack)){var o=Object(Xe.inheritCacheFromOldStack)(a,this.state.stack);this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{stack:o})}))}var s=e.selectedComponents?e.selectedComponents.map((function(e){return e.id})):[];Jt.isEqual(this.state.selectedIds,s)||this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{selectedIds:s})}));var r=e.canvasSize||m.defaultCanvasSize;Jt.isEqual(this.state.canvas.size,r)||this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{canvas:Object(i.a)(Object(i.a)({},e.canvas),{},{size:r})})}),(function(){n.handleWindowResize()}));var c=e.currentScale||1;Jt.isEqual(this.state.canvas.scale,c)||this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{canvas:Object(i.a)(Object(i.a)({},e.canvas),{},{scale:c})})}),(function(){n.handleWindowResize()}))}},{key:"componentDidUpdate",value:function(e,t){if(t.isDragging&&!this.state.isDragging&&t.dragInfo.isDragged){var n=this.state,i=n.canvas,a=n.stack;if(t.dragInfo.stack.length){var o=t.dragInfo.stack.map((function(e){return e.id})),s=a.filter((function(e){return Jt.includes(o,e.id)}));if(b()(i,s))return N.bind(this)(s),void(this.updatedIds=[])}this.notifyUpdatedComponents()}t.isResizing&&!this.state.isResizing&&t.resizeInfo.isResized&&this.notifyUpdatedComponents(),t.isRotating&&!this.state.isRotating&&t.rotateInfo.isRotated&&this.notifyUpdatedComponents(),this.isInitUpdated||(this.isInitUpdated=!0)}},{key:"componentWillMount",value:function(){this.subscribeEventListeners()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,this.unsubscribeEventListeners(),this.releasePullToRefresh()}},{key:"subscribeEventListeners",value:function(){this._handleWindowResize=this.handleWindowResize.bind(this),this._handleMouseDown=this.handleMouseDown.bind(this),this._handleMouseUp=this.handleMouseUp.bind(this),this._handleMouseMove=this.handleMouseMove.bind(this),this._handleKeyDown=this.handleKeyDown.bind(this),this._handleTouchStart=this.handleTouchStart.bind(this),this._handleTouchEnd=this.handleTouchEnd.bind(this),this._handleTouchMove=this.handleTouchMove.bind(this),window.addEventListener("resize",this._handleWindowResize,!1),document.addEventListener("mousedown",this._handleMouseDown,!1),document.addEventListener("mouseup",this._handleMouseUp,!1),document.addEventListener("mousemove",this._handleMouseMove,!1),document.addEventListener("keydown",this._handleKeyDown,!1),document.addEventListener("touchstart",this._handleTouchStart,!1),document.addEventListener("touchend",this._handleTouchEnd,!1),document.addEventListener("touchmove",this._handleTouchMove,!1)}},{key:"unsubscribeEventListeners",value:function(){window.removeEventListener("resize",this._handleWindowResize,!1),document.removeEventListener("mousedown",this._handleMouseDown,!1),document.removeEventListener("mouseup",this._handleMouseUp,!1),document.removeEventListener("mousemove",this._handleMouseMove,!1),document.removeEventListener("keydown",this._handleKeyDown,!1),document.removeEventListener("touchstart",this._handleTouchStart,!1),document.removeEventListener("touchend",this._handleTouchEnd,!1),document.removeEventListener("touchmove",this._handleTouchMove,!1)}},{key:"componentDidMount",value:function(){var e=this;this._ismounted=!0;var t=this.props.t,n=this.refs["work-station"],i=d.a.isMobile(),a=ie.a.checkFeatureAvailable(this.props.featureList,ae.F);(function t(){!function(){var t=n.getBoundingClientRect();return!!e.isInitUpdated&&(i?t.top>40:t.left>430)}()?setTimeout(function(){this._ismounted&&t.bind(this)()}.bind(this),50):this.handleWindowResize()}).bind(this)(),i&&a&&window.alert(t("edit-panel.tips.editing-alert"));var o=d.a.isFireFox()&&i,s=d.a.isIOSFireFox();i&&!(o&&!s)&&this.preventPullToRefresh(".viewer-panel")}},{key:"handleWindowResize",value:function(){if(this.updatePanelPadding(),d.a.isMobile()){var e=this,t=new Date;this.windowResizeTimestamp=t,setTimeout((function(){e.windowResizeTimestamp===t&&e.updatePanelPadding()}),50)}}},{key:"handleKeyDown",value:function(e){"INPUT"===e.target.nodeName||je.bind(this)(e)}},{key:"notifyUpdatedComponents",value:function(){var e=this,t=this.state.stack.filter((function(t){return Jt.includes(e.updatedIds,t.id)})).map((function(e){return e.reportFormat}));this.props.onComponentsChange(t,{userAction:!0}),this.updatedIds=[]}},{key:"handleMouseDown",value:function(e){xe.bind(this)({x:e.clientX,y:e.clientY})}},{key:"handleMouseUp",value:function(){Se.bind(this)()}},{key:"handleMouseMove",value:function(e){De.bind(this)({x:e.clientX,y:e.clientY})}},{key:"handleTouchStart",value:function(e){var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;xe.bind(this)({x:t,y:n})}},{key:"handleTouchEnd",value:function(){Se.bind(this)()}},{key:"handleTouchMove",value:function(e){var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;De.bind(this)({x:t,y:n})}},{key:"_onMouseDown",value:function(){Me.bind(this)()}},{key:"handleBaseComponentAction",value:function(e){var t=e.type,n=e.info;switch(t){case"mouseEnter":Le.bind(this)(n);break;case"mouseLeave":Fe.bind(this)(n);break;case"mouseDown":Te.bind(this)(n)}}},{key:"handleTextComponentAction",value:function(e){var t=e.type,n=e.info;switch(t){case"updateCache":Ae.bind(this)(n);break;case"removeCache":Be.bind(this)(n);break;case"updateLoading":Ne.bind(this)(n);break;case"updateFrameSize":Re.bind(this)(n);break;case"updateFontSize":Pe.bind(this)(n)}}},{key:"handleSelectedFrameAction",value:function(e){var t=e.type,n=e.info;switch(t){case"resizeMouseDown":_e.bind(this)(n);break;case"selectedFrameMouseDown":We.bind(this)();break;case"rotateMouseDown":Ge.bind(this)()}}},{key:"getViewerPanelBoundingRect",value:function(){var e=this.refs["work-station-content"];return e?{top:e.offsetTop,left:e.offsetLeft,width:e.clientWidth,height:e.clientHeight}:null}},{key:"getAutoCenterButtonSize",value:function(){var e=document.getElementById("auto-center-button");return e?{width:e.clientWidth,height:e.clientHeight}:null}},{key:"getAutoCenterButton",value:function(){var e=this.props.t,t=this.getViewerPanelBoundingRect(),n=this.getAutoCenterButtonSize();if(!t)return null;n||(n={width:0,height:0});var i={position:"absolute",top:t.top+t.height-n.height-8,left:t.left+t.width-n.width-8,pointerEvents:"auto",zIndex:2};return n.width||(i.opacity=0),l.a.createElement("div",{id:"auto-center-button",className:"auto-center-button",style:i,onClick:this.props.onAutoCenter},l.a.createElement(Ze.a,null),l.a.createElement("span",null,e("edit-panel.viewer-panel.center-logo")))}},{key:"render",value:function(){var e=this,t=d.a.isMobile(),n=this.props,i=n.t,a=n.editingLogoPurchased,o=n.config,s=this.state,r=s.panel,c=s.canvas,h=s.selectedIds,u=s.hoveringIds,p=s.isDragging,f=s.isResizing,g=this.getViewerPanelBoundingRect(),m=!a,v=Jt.get(o,"meta.canvasColorInExport"),b=Jt.get(o,"meta.canvasColor"),k=ie.a.checkFeatureAvailable(this.props.featureList,ae.U),w=ie.a.checkFeatureAvailable(this.props.featureList,ae.Z),y=ie.a.checkFeatureAvailable(this.props.featureList,ae.V),C=ie.a.checkFeatureAvailable(this.props.featureList,ae.bb),O=ie.a.checkFeatureAvailable(this.props.featureList,ae.cb),E=ie.a.checkFeatureAvailable(this.props.featureList,ae.G),x=ie.a.checkFeatureAvailable(this.props.featureList,ae.F),S=!t&&!this.props.isLoadingEditingTips&&this.props.editingTips&&this.props.editingTips.length&&E,D=!t&&x,j=0;return k&&(j+=240),l.a.createElement("div",{className:"viewer-panel"},l.a.createElement("div",{id:"canvas"}),l.a.createElement("div",{className:"work-station",onMouseDown:this._onMouseDown.bind(this),onTouchStart:this._onMouseDown.bind(this),ref:"work-station",style:{minWidth:t?0:this.state.canvas.size.width*this.state.canvas.scale*1.4,minHeight:t?0:this.state.canvas.size.height*this.state.canvas.scale*1.2}},l.a.createElement("div",{className:"main-frame",ref:"main-frame"},l.a.createElement("div",{className:"work-station-content",ref:"work-station-content",style:{width:this.state.canvas.size.width*this.state.canvas.scale,height:this.state.canvas.size.height*this.state.canvas.scale,backgroundColor:v?"#".concat(b):"#FFFFFF",marginTop:t?0:90,boxShadow:t?"none":"0 5px 20px rgba(71,80,89,.15)"}},this.state.stack.map((function(t,n){var i=t.type,a=Jt.includes(e.state.selectedIds,t.id),o=Jt.includes(e.state.loadingIds,t.id);return"svg"===i?l.a.createElement(Ot.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:a,key:t.id}):"text"===i?l.a.createElement(Ct.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),onTextComponentAction:e.handleTextComponentAction.bind(e),isSelected:a,isLoading:o,key:t.id}):"line"===i?l.a.createElement(jt,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:a,key:t.id}):"shape"===i?l.a.createElement(Mt.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:a,key:t.id}):null})),l.a.createElement($t,{shouldShowWatermark:m})),y&&!t&&l.a.createElement(Zt.a,{config:this.props.config,onMetaChange:this.props.onMetaChange,onColorPopoverOpen:function(){e.unsubscribeEventListeners()},onColorPopoverClose:function(){e.subscribeEventListeners(),e.handleMouseUp()}}),!t&&m&&l.a.createElement(Qt,{className:"work-station-notice"},"- ",i("edit-panel.watermark-notice")," -")),l.a.createElement("div",{className:"overlay"},this.state.guidingLines.map((function(t,n){var i=e.state,a=i.panel,o=i.canvas;return l.a.createElement(He,{panel:a,canvas:o,guidingLine:t,key:n})})),u.map((function(t){var n=e.state.stack.find((function(e){return e.id===t}));return p||f?null:l.a.createElement(nt,{panel:r,canvas:c,hoveringElem:n,key:t})})),h.map((function(t){var n=e.state.stack.find((function(e){return e.id===t}));return Jt.includes(e.state.loadingIds,t)?null:l.a.createElement(yt,Object.assign({},e.state,{resizable:1===h.length&&C,rotatable:1===h.length&&O,isRotating:e.state.isRotating,selectedElem:n,onSelectedFrameAction:e.handleSelectedFrameAction.bind(e),key:t}))})),function(){var t=e.state.selectedIds;if(t.length<=1)return null;var n=e.state.stack.filter((function(e){return Jt.includes(t,e.id)})),i=se.ConfigDigester.extractComponentsFrame(n);return l.a.createElement(yt,Object.assign({},e.state,{resizable:C,rotatable:!1,selectedElem:{type:"group",frame:i},onSelectedFrameAction:e.handleSelectedFrameAction.bind(e)}))}(),function(){var t=e.state,n=t.isDragSelecting,i=t.dragSelectInfo;return n?l.a.createElement(Lt,{dragSelectInfo:i,canvas:c,panel:r}):null}(),!t&&this.getAutoCenterButton(),!t&&h.length>0&&g&&l.a.createElement("div",null,l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:g.top,left:g.left+g.width+10,pointerEvents:"auto"}},l.a.createElement(Ut.e,{onActionItemClick:this.props.onActionItemClick,featureList:this.props.featureList})),l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:g.top-40,left:g.left,pointerEvents:"auto"}},k&&l.a.createElement(Xt.g,{onActionItemClick:this.props.onActionItemClick,offsetLeft:j}),w&&1===h.length&&l.a.createElement(Yt.c,{onActionItemClick:this.props.onActionItemClick,offsetLeft:j}))),S&&l.a.createElement(Wt,{onToggleButtonClick:this.props.toggleTipsCarousel,isShowingTipsCarousel:this.props.isShowingTipsCarousel,menuItem:this.props.menuItem,onMenuClick:this.props.onMenuClick,isLoadingEditingTips:this.props.isLoadingEditingTips,editingTips:this.props.editingTips}),D&&l.a.createElement(Gt,{content:i("edit-panel.tips.editing-alert")}))))}}]),n}(c.Component),tn=Object(qe.b)()(en),nn=n(1772),an=n(2351),on=(n(2265),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.shouldShowBack;return l.a.createElement("div",{className:e?"floating-button back":"floating-button",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick},l.a.createElement("div",{className:e?"wrapper back":"wrapper"},l.a.createElement("i",{className:"fa fa-tint","aria-hidden":"true"}),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})))}}]),n}(c.Component)),sn=(n(2266),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,i){var o;return Object(a.a)(this,n),(o=t.call(this,e,i)).colorPalettes=[{name:"Lady Pink",colors:["#F562A6","#FFB5CC","#F562A6","#FEEDF2"]},{name:"Juno",colors:["#1A535C","#578990","#1A535C","#FFE66C"]},{name:"Patriot",colors:["#334D88","#A90001","#E6E6E6","#0D255E"]},{name:"Ocean Wave",colors:["#197BBD","#696666","#197BBD","#62A7D3"]},{name:"The River",colors:["#3E72AF","#8DB1DD","#3E72AF","#DBE2F0"]},{name:"Apple",colors:["#FF1434","#292929","#F2F2F2","#FF1434"]},{name:"Tropical",colors:["#194702","#575757","#194702","#4E8E30"]},{name:"Good Old Days",colors:["#8B8138","#404040","#8B8138","#D6CD8C"]},{name:"Mystery",colors:["#A5427C","#851756","#A5427C","#FCCCE8"]},{name:"Smartie",colors:["#2EC5B6","#011628","#FF9F1C","#011628"]},{name:"Reliable",colors:["#4A2F7C","#2E2B2B","#CCB9EE","#4A2F7C"]},{name:"Calmness",colors:["#D8A794","#817571","#D8A794","#FFC9B5"]},{name:"Fresh",colors:["#4F873E","#434B26","#4F873E","#CFFFC0"]},{name:"Jujube",colors:["#6F1314","#420202","#6F1314","#C43E3E"]},{name:"Red Rock",colors:["#BF4D31","#381308","#BF4D31","#CDB7B1"]},{name:"Curious",colors:["#484BB4","#FFD14C","#9395DF","#484BB4"]},{name:"Carrot",colors:["#EF8A07","#A55D00","#EFD8BA","#EF8A07"]},{name:"Golden Age",colors:["#DDBF7E","#937A44","#DDBF7E","#FCEDC9"]},{name:"Rainforest",colors:["#187000","#45A92B","#E4E9C3","#282828"]},{name:"Wonderland",colors:["#E63946","#FB8991","#457A9C","#A8DADD"]},{name:"Marshmallow",colors:["#AA95DA","#FCBAD3","#FFFFD2","#AA95DA"]},{name:"Lychee",colors:["#EF243C","#8D99AE","#EDF2F4","#EF243C"]},{name:"Vinyl Records",colors:["#653C00","#1C1406","#C89542","#1C1406"]}],o}return Object(o.a)(n,[{key:"getColorPaletteBlocks",value:function(){var e=this;return this.colorPalettes.map((function(t,n){return l.a.createElement("div",{className:"color-palette-block",onClick:function(){e.props.onSelectColorPalette(t)},key:n},l.a.createElement("div",{className:"title"},t.name),l.a.createElement("div",{className:"color-preview-wrapper"},t.colors.map((function(e,t){return l.a.createElement("div",{className:"color-preview",style:{background:e},key:t})}))))}))}},{key:"render",value:function(){var e=this.props.t,t=this.props.active;return l.a.createElement("div",{className:t?"side-bar active":"side-bar"},l.a.createElement("p",{className:"palette-title"},e("edit-panel.color.premade-color-palettes")),this.getColorPaletteBlocks())}}]),n}(c.Component)),rn=Object(qe.b)()(sn),cn=(n(2267),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,i){var o;return Object(a.a)(this,n),(o=t.call(this,e,i)).state={hoverButton:!1,allowTooltip:!0,showSideBar:!1},o}return Object(o.a)(n,[{key:"componentWillUpdate",value:function(e){void 0!==e.opened&&e.opened!==this.state.showSideBar&&this.applyChange((function(t){return{showSideBar:e.opened}}))}},{key:"toggle",value:function(e){var t=this;this.applyChange((function(t){return{showSideBar:void 0!==e?e:!t.showSideBar}}),(function(){t.props.onToggle(t.state.showSideBar)}))}},{key:"applyChange",value:function(e,t){var n=this;this.setState((function(t){return e(t)}),(function(){t&&t(),n.state.showSideBar?n.setState({allowTooltip:!n.state.showSideBar}):setTimeout(function(){this.setState({allowTooltip:!this.state.showSideBar})}.bind(n),500)}))}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.state,i=n.hoverButton,a=n.showSideBar,o=n.allowTooltip;return l.a.createElement("div",{className:"color-palette-side-bar"},l.a.createElement(an.a,{id:"color-palette-side-bar-tooltip",title:t("edit-panel.color.premade-color-palettes"),open:i&&o,placement:"left"},l.a.createElement(on,{onMouseEnter:function(){e.setState({hoverButton:!0})},onMouseLeave:function(){e.setState({hoverButton:!1})},shouldShowBack:a,onClick:function(){e.toggle()}})),l.a.createElement(rn,{active:a,onSelectColorPalette:function(t){e.toggle(!1),e.props.onSelectColorPalette(t)}}))}}]),n}(c.Component)),ln=Object(qe.b)()(cn),dn=(n(2268),{cloneDeep:w.a,get:ge.a,isEqual:S.a}),hn=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,i){var o;Object(a.a)(this,n),o=t.call(this,e,i);var s=window.innerWidth>=1400?1:.7;return d.a.isMobile()&&(s=window.innerWidth/e.canvasSize.width),o.state={canvasSize:e.canvasSize,scale:s,colorPaletteOpened:!1},o}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){if(d.a.isMobile()&&!dn.isEqual(e.canvasSize,this.props.canvasSize)){var t=window.innerWidth/this.props.canvasSize.width;this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{canvas:Object(i.a)(Object(i.a)({},e.canvas),{},{scale:t})})}))}}},{key:"handleViewerScaleChange",value:function(e){var t=Math.round(10*this.state.scale)/10,n="plus"===e?t+.1:t-.1;(n=n.toFixed(1))>=.6&&n<=1.4&&this.setState({scale:n})}},{key:"handleColorSelect",value:function(e){var t=e.colors[0].replace("#",""),n=e.colors[1].replace("#",""),i=e.colors[2].replace("#",""),a=e.colors[3].replace("#",""),o=this.props.componentInfo,s=function(e){var t=this.props.config.components.find((function(t){return t.id===e}));return t&&(t=dn.cloneDeep(t)),t},r=function(e,o){var r=this,c=[];return e.forEach((function(e){var l=s.bind(r)(e.id);if(l){var d=e.nSupportingDarkBackgrounds%2===1;if("background"===o){var h=l.data.darkBackground?a:n;l.data.tintColor=h,e.backgroundSupport&&d&&l.data.darkBackground&&(l.data.tintColor=n)}else e.backgroundSupport&&d?l.data.tintColor=i:l.data.tintColor="primary"===e.priority?t:n;var p=Boolean(dn.get(l,"data.stroke.width")),f=l.data.tintColor;p&&(l.data.tintColor=function(e){var t=u()(e);return t.isLight()?t.darken(25).toHex():t.lighten(25).toHex()}(f),l.data.stroke.tintColor=f),c.push(l)}})),c},c=[];for(var l in o)c=c.concat(r.bind(this)(o[l],l));this.props.onComponentsChange(c,{userAction:!0})}},{key:"render",value:function(){var e=this,t=d.a.isMobile(),n=this.props,i=n.config,a=n.editingItems,o=n.editingLogoPurchased,s=this.state.canvasSize,r=t?this.state.scale:Math.round(10*this.state.scale)/10,c=this.props.undoStack.length>0,h=this.props.redoStack.length>0;return o&&["logo"].push("purchased"),l.a.createElement("div",{className:"viewer"},l.a.createElement(tn,{ref:"viewer-panel",config:i,canvasSize:s,currentScale:r,editingLogoPurchased:this.props.editingLogoPurchased,selectedComponents:a,onComponentsChange:function(t,n){e.props.onComponentsChange(t,n)},onAutoCenter:this.props.onAutoCenter,onActionItemClick:function(t){e.props.onActionItemClick(t,a)},onDeleteComponents:this.props.onDeleteComponents,onSelectComponents:function(t){e.props.onSelectComponents(t),e.setState({colorPaletteOpened:!1})},onUndoChange:this.props.onUndoChange,onRedoChange:this.props.onRedoChange,onMetaChange:this.props.onMetaChange,menuItem:this.props.menuItem,onMenuClick:this.props.onMenuClick,isShowingTipsCarousel:this.props.isShowingTipsCarousel,toggleTipsCarousel:this.props.toggleTipsCarousel,isLoadingEditingTips:this.props.isLoadingEditingTips,editingTips:this.props.editingTips,featureList:this.props.featureList}),!t&&!o&&l.a.createElement(nn.a,null),!t&&l.a.createElement(ln,{opened:this.state.colorPaletteOpened,onToggle:function(t){e.setState({colorPaletteOpened:t}),t&&e.props.onSelectComponents(null)},onSelectColorPalette:this.handleColorSelect.bind(this)}),!t&&l.a.createElement("div",{className:"viewer-control"},l.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),l.a.createElement("span",null,l.a.createElement("i",{onClick:function(){e.handleViewerScaleChange("minus")},className:"fa fa-minus","aria-hidden":"true"}),l.a.createElement("span",null,"".concat(Math.round(100*r),"%")),l.a.createElement("i",{onClick:function(){e.handleViewerScaleChange("plus")},className:"fa fa-plus","aria-hidden":"true"}))),!t&&l.a.createElement("div",{className:"action-control"},l.a.createElement("span",null,l.a.createElement("i",{onClick:this.props.onUndoChange,className:c?"fa fa-undo":"fa fa-undo disabled","aria-hidden":"true"}),l.a.createElement("span",null),l.a.createElement("i",{onClick:this.props.onRedoChange,className:h?"fa fa-repeat":"fa fa-repeat disabled","aria-hidden":"true"}))))}}]),n}(c.Component);t.a=hn},2225:function(e,t,n){},2228:function(e,t,n){var i={get:n(216)},a=n(909).degreeToRadian;e.exports=function(e,t){var n=e.frame,o=n.origin,s=n.size,r=i.get(e,"transform.rotate")||0,c=t||"center",l=o.x+s.width/2,d=o.y+s.height/2,h=a(r),u=2*Math.atan(s.height/s.width),p=0;switch(c){case"e":p=h;break;case"s":p=Math.PI/2+h;break;case"w":p=Math.PI+h;break;case"n":p=3*Math.PI/2+h;break;case"se":p=u/2+h;break;case"sw":p=Math.PI-u/2+h;break;case"nw":p=Math.PI+u/2+h;break;case"ne":p=2*Math.PI-u/2+h}var f=Math.sqrt(Math.pow(s.width,2)+Math.pow(s.height,2)),g=0;switch(c){case"nw":case"ne":case"se":case"sw":g=f/2;break;case"w":case"e":g=s.width/2;break;case"n":case"s":g=s.height/2}return{x:l+g*Math.cos(p),y:d+g*Math.sin(p)}}},2229:function(e,t,n){var i=n(909).degreeToRadian;e.exports={getDeltaWithResizeMode:function(e,t,n,a){var o,s,r=e||0,c=t||0,l=i(a),d=Math.sin(l),h=Math.cos(l);switch(n){case"se":o=r*h+c*d,s=-r*d+c*h;break;case"sw":o=-r*h-c*d,s=-r*d+c*h;break;case"nw":o=-r*h-c*d,s=r*d-c*h;break;case"ne":o=r*h+c*d,s=r*d-c*h;break;case"w":o=-r*h-c*d,s=0;break;case"e":o=r*h+c*d,s=0;break;case"n":o=0,s=r*d-c*h;break;case"s":o=0,s=-r*d+c*h}return void 0!==o&&void 0!==s||console.log("getDeltaWithResizeMode error: unexpected undefined value",o,s),{deltaX:o,deltaY:s}},getOriginChangeWithResizeMode:function(e,t,n){switch(n){case"se":case"e":case"s":e=0,t=0;break;case"ne":case"n":e=0;break;case"sw":case"w":t=0}return{originChangeX:e,originChangeY:t}},getAnchorWithMode:function(e){var t="top-left";switch(e){case"nw":t="bottom-right";break;case"ne":t="bottom-left";break;case"sw":t="top-right"}return t}}},2230:function(e,t){e.exports={getDeltaWithResizeMode:function(e,t,n){var i=e,a=t;switch(n){case"nw":i=i?-i:i,a=a?-a:a;break;case"ne":a=a?-a:a;break;case"sw":i=i?-i:i;break;case"w":i=i?-i:0,a=0;break;case"e":i=i||0,a=0;break;case"n":i=0,a=a?-a:0;break;case"s":i=0,a=a||0}return{deltaX:i,deltaY:a}},getOriginChangeWithResizeMode:function(e,t,n){switch(n){case"se":case"e":case"s":e=0,t=0;break;case"ne":case"n":e=0;break;case"sw":case"w":t=0}return{originChangeX:e,originChangeY:t}},getAnchorWithMode:function(e){var t="top-left";switch(e){case"nw":t="bottom-right";break;case"ne":t="bottom-left";break;case"sw":t="top-right"}return t}}},2231:function(e,t,n){var i={map:n(763),find:n(1080),isEqual:n(897)},a=n(2232),o=n(2239),s=n(2240),r=n(2241),c=function(e){return i.map(e,(function(e){return e.reportFormat}))};e.exports={getStackFromConfig:function(e){return i.map(e,(function(e){return"svg"===e.type?new a(e):"text"===e.type?new o(e):"line"===e.type?new s(e):"shape"===e.type?new r(e):void 0}))},getReportFormatStack:c,inheritCacheFromOldStack:function(e,t){return i.map(e,(function(e){if("text"===e.type){var n=i.find(t,{id:e.id});n&&(e.cachedData=n.cachedData)}return e}))},isSameStack:function(e,t){var n=c(e),a=c(t),o=!0;if(n.length===a.length)for(var s=0;s<n.length;s++){var r=n[s],l=a[s];if(!i.isEqual(r,l)){o=!1;break}}else o=!1;return o}}},2232:function(e,t,n){var i=n(1633),a=n(1634),o=n(1646),s=n(1647),r=n(1648);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){return i(this,n),t.apply(this,arguments)}return a(n,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(r)},2239:function(e,t,n){var i=n(1633),a=n(1634),o=n(1646),s=n(1647),r={pick:n(1166)},c=n(1648);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,n),(e=t.call(this,a)).cachedData=a.cachedData||{},e}return a(n,[{key:"coreData",get:function(){return r.pick(this.data,["text","fontSize","letterSpacing","fontUrl","font"])}},{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(c)},2240:function(e,t,n){var i=n(1633),a=n(1634),o=n(1646),s=n(1647),r=n(1648);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){return i(this,n),t.apply(this,arguments)}return a(n,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(r)},2241:function(e,t,n){var i=n(1633),a=n(1634),o=n(1646),s=n(1647),r=n(1648);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){return i(this,n),t.apply(this,arguments)}return a(n,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(r)},2242:function(e,t,n){},2258:function(e,t,n){},2262:function(e,t,n){},2263:function(e,t,n){},2265:function(e,t,n){},2266:function(e,t,n){},2267:function(e,t,n){},2268:function(e,t,n){}}]);